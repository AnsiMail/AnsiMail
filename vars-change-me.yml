# Variables information file

# Each option has been described in as much detail as possible
# READ EVERYTHING VERY CLOSELY


#------------ REQUIRED

# This is the domain name for which the mail server will be set up.
# You need at least one domain name.
# Additional domain names will be allowed in the optional configurations.
domain: <change-me> # e.g. aisha.cc

# This is the network interface talking to the outside world
# through which you will be receiving emails and clients will be connecting.
#interface: vio0
interface: <change-me> #e.g. vio0 # this is the one generally used on Vultr 
                       #            and other VPS platform

# ipv4/ipv6 address of this server
# We need to get this manually instead of automatically in the case
# that this server is behind a NAT and is only reachable via forwarded ports
ip: <change-me> # e.g. 1.2.3.4
ip6: <change-me> # e.g. dead:beef

# This is the user that will be added to :wheel and also quite a bit of other 
# config is done to allow this user to work the system
# (and if you use ssh_harden, will also be allowed ssh access to server)
# Make sure that this user does not exist prior to running
# Ansimail creates a default _ansimail user that is used to do configurations
username: <change-me> # e.g. aisha



#------------ OPTIONAL

# SSH by default uses password authentication and allows everyone (except root)
# We can harden ssh by only allowing certain users to 
# access the server using ONLY public-key based authentication
# Enabling this option adds a tonne of options, some of which are
#  - SSHFP records to NSD (which also enables DNSSEC)
#      this can be toggled off per domain basis
#  - disables password bsaed logins for everyone
#  - enables pubkey access for specified users (the username value from above
#      is added by default, no need to list it here again)
#  - changes default port of sshd to specified value
#  - only allows ssh access on the specified interfaces (by opening the firewall)
ssh_harden: true
ssh_interfaces:
        - <change-me> # vio0 is the default egress interface for most VPS servers
        - <change-me> # add any others, like virtual(!?) interfaces
ssh_port: <change-me> # change this to something other than 22 (unless you want 
                      # random attackers trying out your server for checks
ssh_users:
        - <change-me>
        - <change-me>

# Harden the default firewall PF
# By default the firewall allows all ports to be accessed
# though there does need to be a service making use of that 
# port
# This will disable access to all ports except the ones 
# required by enabled services and those listed here
# Currently the ports are opened on all interfaces
# If you have complex networking setup, then you should
# disable pf_harden and configure it yourself, like a good little kid
pf_harden: true
additional_tcp_ports:
        - <change-me>
        - <change-me>
additional_udp_ports:
        - <change-me>
        - <change-me>

#--- NSD config (if you want to run a stealth master configuration)
# HIGHLY RECOMMENDED TO ENABLE
# (this is going to be a bit long)

nsd_enable: true

# These nameservers are the ones to which we will be sending NOTIFY and AXFR
# BEWARE: these are not the same as the ip's of the nameservers of the 
#         DNS hosting provider, such as ns1.dnsmadeeasy.com. These have are
#         given to you when you configure the DNS provider as a secondary 
#         service, not when using as the primary 
# For some reason these are currently only ipv4 (maybe I should read some more)
secondary_nameservers:
        - <change-me>
        - <change-me>

# These nameservers are used by others in the internet to find your servers
# through DNS querying.
# They are the ones that should resolve to ns1.dnsmadeeasy.com/ns1.<dns-provider.tld>
# or something of that form, which makes it clear that they are DNS servers
# You will also need to provide these for any additional domains that
# you add in the following section
public_nameservers:
        - <change-me>
        - <change-me>
public_nameservers_ipv6:
        - <change-me>
        - <change-me>


# COMPLEX USAGE: allows you to do really complex things based off
#                the automatic zone file configuration
# If this is true, it ignores the following variables
#   - domain (the first variable defined above)
#   - nsd_enable
#   - secondary_nameservers
#   - public_nameservers
#   - public_nameservers_ipv6
# You need to do complex nsd if you have more than one domain
# that you want to configure here, and send emails for both 
# of them from the same server, else it is fine to use the simple nsd config from above
nsd_complex: false

# There will be some example configurations in the examples/ directory
# which show how to pick and choose domains for NSD and also how to disable
# specific records that our NSD configuration adds
# In essence, the configuration here can be thought of as a generator for each domain
# You have to enable the first domain, which needs to be the same as the one above
# but even there you can enable/disable certain configs

# Additional domain names for which to configure the mail server
# can be added here
# Contains the default domain name listed above automatically
# Each of them is going to allow users to send the emails as if sent from 
# their domain name
# If you are enabling multiple domain names, it is a good idea to read
# up on the NSD config (not necessary)
# Also you need to provide secondary_nameservers and public_nameserver(_ipv6)
# for each of the additional domains seperately

domain_list:
        - name: <change-me>
          domain_name: <change-me>
          # Do the certificates for this domain need to be generated and auto managed?
          # If so, we will use the default httpd and acme-client to generate the certs
          # specifically for ansimail.domain.tld
          # valid options: true/false
          manage_certs: <change-me>
          # If you disable nsd for a domain, a zone file is still created to tell you
          # what records you need to manually enter in your DNS host
          enable_domain_nsd: <change-me>
          # secondary nameservers for this specific domain
          secondary_nameservers:
                  - <change-me>
                  - <change-me>
          # These nameservers are used by others in the internet to find your servers
          # through DNS querying.
          # They are the ones that should resolve to ns1.dnsmadeeasy.com/ns1.<dns-provider.tld>
          # or something of that form, which makes it clear that they are DNS servers
          # You will also need to provide these for any additional domains that
          # you add in the following section
          # NEEDS: enable_domain_nsd: true
          public_nameservers:
                  - <change-me>
                  - <change-me>
          public_nameservers_ipv6:
                  - <change-me>
                  - <change-me>
          # You can disable specific records if you want
          # valid options are: sshfp, caa, tlsa
          # NEEDS: enable_domain_nsd: true
          disable_records:
                  - <change-me>
                  - <change-me>

